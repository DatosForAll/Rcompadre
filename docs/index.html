<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Utilities for working with the COMPADRE/COMADRE Database • Rcompadre</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Utilities for working with the COMPADRE/COMADRE Database">
<meta property="og:description" content="A set of utility tools for working with the COMPADRE/COMADRE databases. The package provides utility functions for interacting with the COMPADRE and COMADRE databases of matrix population model.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Rcompadre</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/GettingStarted.html">Getting Started with Rcompadre</a>
    </li>
    <li>
      <a href="articles/ObtainingReferences.html">Obtaining References</a>
    </li>
    <li>
      <a href="articles/RcompadreTidy.html">Using Rcompadre with the Tidyverse</a>
    </li>
    <li>
      <a href="articles/VectorizingRcompadre.html">Vectorizing with Rcompadre</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="rcompadre-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rcompadre-" class="anchor"></a>Rcompadre <img src="reference/figures/logo.png" height="160px" align="right">
</h1></div>

<p>An R package to work with the <a href="https://www.compadre-db.org/">COM(P)ADRE</a> Plant and Animal Matrix Population Databases. Note this package is at an early stage of development, and may contain bugs.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install package 'remotes' if necessary</span>
<span class="co"># will already be installed if 'devtools' is installed</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span> 

<span class="co"># argument 'build_opts = NULL' only needed if you want to build vignettes</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"jonesor/Rcompadre"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># use argument 'build_vignettes = FALSE' if the vignette build fails</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"jonesor/Rcompadre"</span>, build_vignettes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>To install the development branch use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"jonesor/Rcompadre"</span>, ref <span class="op">=</span> <span class="st">"devel"</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">Rcompadre</span><span class="op">)</span></code></pre></div>
<div id="fetching-a-database" class="section level4">
<h4 class="hasAnchor">
<a href="#fetching-a-database" class="anchor"></a>Fetching a database</h4>
<p>Fetch the most recent database version from <a href="https://www.compadre-db.org/">compadre-db.org</a> with</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">compadre</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cdb_fetch.html">cdb_fetch</a></span><span class="op">(</span><span class="st">"compadre"</span><span class="op">)</span> <span class="co"># or use 'comadre' for the animal database</span></code></pre></div>
<p>or load from a local <code>.RData</code> file with, for example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">compadre</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cdb_fetch.html">cdb_fetch</a></span><span class="op">(</span><span class="st">"path/to/file/COMPADRE_v.4.0.1.RData"</span><span class="op">)</span></code></pre></div>
<p>If you prefer using <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> to load your local copy of a legacy database, use <code><a href="reference/as_cdb.html">as_cdb()</a></code> to convert it to the ‘CompadreDB’ class</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"COMPADRE_v.4.0.1.RData"</span><span class="op">)</span> <span class="co"># loads object 'compadre'</span>
<span class="va">compadre</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/as_cdb.html">as_cdb</a></span><span class="op">(</span><span class="va">compadre</span><span class="op">)</span></code></pre></div>
</div>
<div id="subsetting" class="section level4">
<h4 class="hasAnchor">
<a href="#subsetting" class="anchor"></a>Subsetting</h4>
<p>For the most part <code>CompadreDB</code> objects work like a data frame. They can be subset using <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> or <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># subset to the first 10 rows</span>
<span class="va">compadre</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span>

<span class="co"># subset to the species 'Echinacea angustifolia'</span>
<span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">compadre</span>, <span class="va">SpeciesAccepted</span> <span class="op">==</span> <span class="st">"Echinacea angustifolia"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example-analysis-calculating-population-growth-rates" class="section level4">
<h4 class="hasAnchor">
<a href="#example-analysis-calculating-population-growth-rates" class="anchor"></a>Example analysis: calculating population growth rates</h4>
<p>First we’ll use the function <code>cdb_flag</code> to add columns to the database flagging potential issues with the projection matrices, such as missing values, or matrices that don’t meet assumptions like ergodicity, irreducibility, or primitivity.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">compadre_flags</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cdb_flag.html">cdb_flag</a></span><span class="op">(</span><span class="va">compadre</span><span class="op">)</span></code></pre></div>
<p>We’ll only be able to calculate population growth rates from matrices that don’t contain missing values, and we only want to use matrices that meet the assumption of ergodicity, so we’ll subset the database accordingly.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">compadre_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">compadre_flags</span>,
                       <span class="va">check_NA_A</span> <span class="op">==</span> <span class="cn">FALSE</span> <span class="op">&amp;</span> <span class="va">check_ergodic</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Finally, we’ll use the <code>lambda</code> function from the library <a href="https://github.com/cstubben/popbio">popbio</a> to calculate the population growth rate for every matrix in <code>compadre_sub</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">popbio</span><span class="op">)</span>
<span class="va">compadre_sub</span><span class="op">$</span><span class="va">lambda</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="reference/CompadreMatrixMethods.html">matA</a></span><span class="op">(</span><span class="va">compadre_sub</span><span class="op">)</span>, <span class="va">lambda</span><span class="op">)</span></code></pre></div>
<p>In the code above, the accessor function <code><a href="reference/CompadreMatrixMethods.html">matA()</a></code> is used to extract a list of projection matrices (the full matrix, “matA”) from every row of <code>compadre_sub</code>. There are also accessor functions for the matrix subcomponents (<code><a href="reference/CompadreMatrixMethods.html">matU()</a></code>, <code><a href="reference/CompadreMatrixMethods.html">matF()</a></code>, <code><a href="reference/CompadreMatrixMethods.html">matC()</a></code>), and for many other parts of the database too.</p>
</div>
</div>
<div id="previous-releases" class="section level2">
<h2 class="hasAnchor">
<a href="#previous-releases" class="anchor"></a>Previous releases</h2>
<p>Specific earlier releases of this package can be installed using the appropriate <code><a href="https://rdrr.io/r/base/slotOp.html">@</a></code> tag. You can see details of the existing releases <a href="https://github.com/jonesor/Rcompadre/releases">here</a>. Note that the most recent version does not necessarily have an <code><a href="https://rdrr.io/r/base/slotOp.html">@</a></code> tag.</p>
<p>To install version 0.2.0, our last release before our introduction of the new <code>CompadreDB</code> class, and associated major changes to the package:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"jonesor/Rcompadre@v0.2.0"</span><span class="op">)</span></code></pre></div>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p>All contributions are welcome. Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Patrick Barks <br><small class="roles"> Author </small>  </li>
<li>Danny Buss <br><small class="roles"> Author </small>  </li>
<li>Roberto Salguero-Gomez <br><small class="roles"> Author </small>  </li>
<li>Iain Stott <br><small class="roles"> Author </small>  </li>
<li>Tamora James <br><small class="roles"> Author </small>  </li>
<li>Owen Jones <br><small class="roles"> Author, maintainer </small>  </li>
<li>Julia Jones <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/jonesor/Rcompadre"><img src="https://travis-ci.org/jonesor/Rcompadre.svg?branch=devel" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/jonesor/Rcompadre"><img src="https://ci.appveyor.com/api/projects/status/github/jonesor/Rcompadre?branch=devel&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/jonesor/Rcompadre?branch=devel"><img src="https://codecov.io/gh/jonesor/Rcompadre/branch/devel/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Patrick Barks, Danny Buss, Roberto Salguero-Gomez, Iain Stott, Tamora James, Owen Jones, Julia Jones.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
